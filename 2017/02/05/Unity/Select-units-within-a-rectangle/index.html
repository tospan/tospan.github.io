<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Unity Select units within a rectangle | 吐司片的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In strategy games it’s common to select units by making a rectangle with the mouse. All of those units within the area will then be selected when you release the mouse button. This is how it looks lik">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity Select units within a rectangle">
<meta property="og:url" content="http://tospan.me/2017/02/05/Unity/Select-units-within-a-rectangle/index.html">
<meta property="og:site_name" content="吐司片的博客">
<meta property="og:description" content="In strategy games it’s common to select units by making a rectangle with the mouse. All of those units within the area will then be selected when you release the mouse button. This is how it looks lik">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/red-alert-square.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/gui-image-object.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/sprite-editor.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/gui-square-complete.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/selection-square-example.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/selection-square-3d-space.png">
<meta property="og:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/final-select-units-within-square.png">
<meta property="og:updated_time" content="2017-02-05T11:43:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unity Select units within a rectangle">
<meta name="twitter:description" content="In strategy games it’s common to select units by making a rectangle with the mouse. All of those units within the area will then be selected when you release the mouse button. This is how it looks lik">
<meta name="twitter:image" content="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/red-alert-square.png">
  
    <link rel="alternate" href="/atom.xml" title="吐司片的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">吐司片的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Work hard, play hard.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tospan.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Unity/Select-units-within-a-rectangle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/05/Unity/Select-units-within-a-rectangle/" class="article-date">
  <time datetime="2017-02-05T11:43:17.000Z" itemprop="datePublished">2017-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity/">Unity</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Unity Select units within a rectangle
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In strategy games it’s common to select units by making a rectangle with the mouse. All of those units within the area will then be selected when you release the mouse button. This is how it looks like in the strategy game Red Alert:</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/red-alert-square.png" alt="Red Alert select units within square"><br><a id="more"></a></p>
<p>I’ve recently been prototyping a strategy game and I realized that selecting all units within a rectangle wasn’t as easy as I first had thought. The difference with the classic strategy games is that we are now operating in 3D space and not 2D space as in Red Alert. So we will se that we are not selecting units within a rectangle in 3D space, but the corners in the rectangle are actually not 90 degrees, even though it looks like the corners are 90 degrees on the screen.</p>
<h2 id="Basic-scene"><a href="#Basic-scene" class="headerlink" title="Basic scene"></a>Basic scene</h2><p>But before we begin with the heavy lifting we need a basic scene. So just create a ground plane (make sure it’s on layer 8 or change it in the code) and a few cubes that will act as our units (make sure they are taged as Friendly or change it in the code). A unit can either be:</p>
<ul>
<li><strong>Selected</strong>. We have selected the unit (and in a real game we can now move the unit).</li>
<li><strong>Not selected</strong>. The unit is just standing there.</li>
<li><strong>Highlighted</strong>. This mode is useful if we just want to display the unit’s health (like in Red Alert). We are either hovering with the mouse above the unit or the unit is within the selection rectangle but we haven’t released the mouse button so the unit is not selected.<br>So we need 3 different materials to show if a unit is either highlighted, selected, or not anything at all. Also add 4 spheres to make it easier to debug the corners of the rectangle in which we will select the units.</li>
</ul>
<p>You also need a camera script. A basic script that will do the job:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Tutorial</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TiltedCamera</span> : <span class="title">MonoBehaviour</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//The height we begin with</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">float</span> startZoom;</div><div class="line"></div><div class="line">        <span class="comment">//The camera's transform to save space</span></div><div class="line">        Transform cameraTrans;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//Get the camera's transform</span></div><div class="line">            cameraTrans = Camera.main.transform;</div><div class="line"></div><div class="line">            <span class="comment">//Move the camera to the start position</span></div><div class="line">            cameraTrans.position = Vector3.zero;</div><div class="line"></div><div class="line">            <span class="comment">//Rotate the camera to the correct rotation</span></div><div class="line">            cameraTrans.eulerAngles = <span class="keyword">new</span> Vector3(<span class="number">45</span>f, <span class="number">0</span>f, <span class="number">0</span>f);</div><div class="line"></div><div class="line">            <span class="comment">//Zoom the camera to the initial zoom</span></div><div class="line">            cameraTrans.Translate(-Vector3.forward * startZoom);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Make-the-square"><a href="#Make-the-square" class="headerlink" title="Make the square"></a>Make the square</h2><p>When I first began trying to make a rectangle I though about making a line renderer, but it didn’t look good. So we are instead going to use Unity’s GUI system. So add an “UI Image” to the scene. This will automatically add a canvas and the Image will be a child to the canvas. Rename the Image to Selection Square.</p>
<p>The square itself will consist of a tiny 3x3 pixels large image, where the center is transparent and the surrounding frame is the color you want the selection rectangle to consist of. Click here to <a href="http://www.habrador.com/tutorials/select-units-within-rectangle/_img/selection-square.png" target="_blank" rel="external">download</a> it.</p>
<p>Change it to Texture type: Sprite (2D and UI), and add the 3x3 image as source image in the GUI Image object. Now in the GUI Image object you change the Image type to Sliced, but now Unity will complain that “This image doesn’t have any borders.”</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/gui-image-object.png" alt="GUI image object"></p>
<p>To give it borders, select the image and click on Sprite editor. From the different sides of the image, drag to form borders across the center pixel:</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/sprite-editor.png" alt="Unity sprite editor"></p>
<p>Then click on apply and try to resize the GUI Image object (and uncheck Fill Center). You should now see that the border is always 1 pixel large no matter how large the image is. Also make sure the transform is anchored to the middle of the canvas.</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/gui-square-complete.png" alt="The complete GUI rectangle"></p>
<h2 id="Draw-the-square"><a href="#Draw-the-square" class="headerlink" title="Draw the square"></a>Draw the square</h2><p>The idea here is that we are going to:</p>
<ul>
<li>Select a single unit will Left Mouse Button</li>
<li>Select all units within a rectangle by making a square while holding Left Mouse Button</li>
<li>Deselect all units by clicking with Left Mouse Button on something else than a unit</li>
<li>Highlight a unit while hovering above with the mouse, or if the unit is inside of the rectangle</li>
</ul>
<p>To make all this work we need to determine if we are clicking with the left mouse button or holding it to make a rectangle. We are going to do that by using a timer. So if we have held down the mouse button for a certain amount of time, we will assume that we are going to make a rectangle. Otherwise we assume that we are clicking with the mouse button. But that’s the easy part.</p>
<p>The complicated part is to determine the corners of the rectangle, and then draw the GUI rectangle, and then check if a unit is within the rectangle. To do that we have to convert the world position where we started the rectangle to a GUI position, which is in 2D. When we have done that we figure out the center position of the rectangle we want to draw. And if we have the start position and end position (like top-left and bottom-right corner) we can easily calculate the width and the height of the rectangle. We then add the center position and the size to the GUI rectangle image we created.</p>
<p>When we know the size of the GUI rectangle, we have to convert the corners back to the 3D world because two of the corners are not the same as if we had made the same calculations in 3D space. If you test to make a rectangle, then pause the game, and look at the scene from the top, you will see that what looks like a rectangle in 2D is actually not a rectangle in 3D.</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/selection-square-example.png" alt="Selection rectangle 2D space"></p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/selection-square-3d-space.png" alt="Selection rectangle 3D space"></p>
<p>So to determine if a unit is within the polygon we are going to divide it into two triangles and then just check if the center position of a unit is within one of the triangles. If you want you could check all corners of your unit, but it will be a little slower.</p>
<p>Anyway, this is the final script:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Tutorial</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SelectionSquare</span> : <span class="title">MonoBehaviour</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">//Add all units in the scene to this array</span></div><div class="line">        <span class="keyword">public</span> GameObject[] allUnits;</div><div class="line">        <span class="comment">//The selection square we draw when we drag the mouse to select units</span></div><div class="line">        <span class="keyword">public</span> RectTransform selectionSquareTrans;</div><div class="line">        <span class="comment">//To test the square's corners</span></div><div class="line">        <span class="keyword">public</span> Transform sphere1;</div><div class="line">        <span class="keyword">public</span> Transform sphere2;</div><div class="line">        <span class="keyword">public</span> Transform sphere3;</div><div class="line">        <span class="keyword">public</span> Transform sphere4;</div><div class="line">        <span class="comment">//The materials</span></div><div class="line">        <span class="keyword">public</span> Material normalMaterial;</div><div class="line">        <span class="keyword">public</span> Material highlightMaterial;</div><div class="line">        <span class="keyword">public</span> Material selectedMaterial;</div><div class="line"></div><div class="line">        <span class="comment">//All currently selected units</span></div><div class="line">        [System.NonSerialized]</div><div class="line">        <span class="keyword">public</span> List&lt;GameObject&gt; selectedUnits = <span class="keyword">new</span> List&lt;GameObject&gt;();</div><div class="line"></div><div class="line">        <span class="comment">//We have hovered above this unit, so we can deselect it next update</span></div><div class="line">        <span class="comment">//and dont have to loop through all units</span></div><div class="line">        GameObject highlightThisUnit;</div><div class="line"></div><div class="line">        <span class="comment">//To determine if we are clicking with left mouse or holding down left mouse</span></div><div class="line">        <span class="keyword">float</span> delay = <span class="number">0.3</span>f;</div><div class="line">        <span class="keyword">float</span> clickTime = <span class="number">0</span>f;</div><div class="line">        <span class="comment">//The start and end coordinates of the square we are making</span></div><div class="line">        Vector3 squareStartPos;</div><div class="line">        Vector3 squareEndPos;</div><div class="line">        <span class="comment">//If it was possible to create a square</span></div><div class="line">        <span class="keyword">bool</span> hasCreatedSquare;</div><div class="line">        <span class="comment">//The selection squares 4 corner positions</span></div><div class="line">        Vector3 TL, TR, BL, BR;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//Deactivate the square selection image</span></div><div class="line">            selectionSquareTrans.gameObject.SetActive(<span class="literal">false</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//Select one or several units by clicking or draging the mouse</span></div><div class="line">            SelectUnits();</div><div class="line"></div><div class="line">            <span class="comment">//Highlight by hovering with mouse above a unit which is not selected</span></div><div class="line">            HighlightUnit();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//Select units with click or by draging the mouse</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">SelectUnits</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//Are we clicking with left mouse or holding down left mouse</span></div><div class="line">            <span class="keyword">bool</span> isClicking = <span class="literal">false</span>;</div><div class="line">            <span class="keyword">bool</span> isHoldingDown = <span class="literal">false</span>;</div><div class="line"></div><div class="line">            <span class="comment">//Click the mouse button</span></div><div class="line">            <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</div><div class="line">            &#123;</div><div class="line">                clickTime = Time.time;</div><div class="line"></div><div class="line">                <span class="comment">//We dont yet know if we are drawing a square, but we need the first coordinate in case we do draw a square</span></div><div class="line">                RaycastHit hit;</div><div class="line">                <span class="comment">//Fire ray from camera</span></div><div class="line">                <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(Input.mousePosition), <span class="keyword">out</span> hit, <span class="number">200</span>f, <span class="number">1</span> &lt;&lt; <span class="number">8</span>))</div><div class="line">                &#123;</div><div class="line">                    <span class="comment">//The corner position of the square</span></div><div class="line">                    squareStartPos = hit.point;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//Release the mouse button</span></div><div class="line">            <span class="keyword">if</span> (Input.GetMouseButtonUp(<span class="number">0</span>))</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span> (Time.time - clickTime &lt;= delay)</div><div class="line">                &#123;</div><div class="line">                    isClicking = <span class="literal">true</span>;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">//Select all units within the square if we have created a square</span></div><div class="line">                <span class="keyword">if</span> (hasCreatedSquare)</div><div class="line">                &#123;</div><div class="line">                    hasCreatedSquare = <span class="literal">false</span>;</div><div class="line"></div><div class="line">                    <span class="comment">//Deactivate the square selection image</span></div><div class="line">                    selectionSquareTrans.gameObject.SetActive(<span class="literal">false</span>);</div><div class="line"></div><div class="line">                    <span class="comment">//Clear the list with selected unit</span></div><div class="line">                    selectedUnits.Clear();</div><div class="line"></div><div class="line">                    <span class="comment">//Select the units</span></div><div class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allUnits.Length; i++)</div><div class="line">                    &#123;</div><div class="line">                        GameObject currentUnit = allUnits[i];</div><div class="line"></div><div class="line">                        <span class="comment">//Is this unit within the square</span></div><div class="line">                        <span class="keyword">if</span> (IsWithinPolygon(currentUnit.transform.position))</div><div class="line">                        &#123;</div><div class="line">                            currentUnit.GetComponent&lt;MeshRenderer&gt;().material = selectedMaterial;</div><div class="line"></div><div class="line">                            selectedUnits.Add(currentUnit);</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">//Otherwise deselect the unit if it's not in the square</span></div><div class="line">                        <span class="keyword">else</span></div><div class="line">                        &#123;</div><div class="line">                            currentUnit.GetComponent&lt;MeshRenderer&gt;().material = normalMaterial;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">            <span class="comment">//Holding down the mouse button</span></div><div class="line">            <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span> (Time.time - clickTime &gt; delay)</div><div class="line">                &#123;</div><div class="line">                    isHoldingDown = <span class="literal">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//Select one unit with left mouse and deselect all units with left mouse by clicking on what's not a unit</span></div><div class="line">            <span class="keyword">if</span> (isClicking)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//Deselect all units</span></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; selectedUnits.Count; i++)</div><div class="line">                &#123;</div><div class="line">                    selectedUnits[i].GetComponent&lt;MeshRenderer&gt;().material = normalMaterial;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">//Clear the list with selected units</span></div><div class="line">                selectedUnits.Clear();</div><div class="line"></div><div class="line">                <span class="comment">//Try to select a new unit</span></div><div class="line">                RaycastHit hit;</div><div class="line">                <span class="comment">//Fire ray from camera</span></div><div class="line">                <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(Input.mousePosition), <span class="keyword">out</span> hit, <span class="number">200</span>f))</div><div class="line">                &#123;</div><div class="line">                    <span class="comment">//Did we hit a friendly unit?</span></div><div class="line">                    <span class="keyword">if</span> (hit.collider.CompareTag(<span class="string">"Friendly"</span>))</div><div class="line">                    &#123;</div><div class="line">                        GameObject activeUnit = hit.collider.gameObject;</div><div class="line">                        <span class="comment">//Set this unit to selected</span></div><div class="line">                        activeUnit.GetComponent&lt;MeshRenderer&gt;().material = selectedMaterial;</div><div class="line">                        <span class="comment">//Add it to the list of selected units, which is now just 1 unit</span></div><div class="line">                        selectedUnits.Add(activeUnit);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//Drag the mouse to select all units within the square</span></div><div class="line">            <span class="keyword">if</span> (isHoldingDown)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//Activate the square selection image</span></div><div class="line">                <span class="keyword">if</span> (!selectionSquareTrans.gameObject.activeInHierarchy)</div><div class="line">                &#123;</div><div class="line">                    selectionSquareTrans.gameObject.SetActive(<span class="literal">true</span>);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">//Get the latest coordinate of the square</span></div><div class="line">                squareEndPos = Input.mousePosition;</div><div class="line"></div><div class="line">                <span class="comment">//Display the selection with a GUI image</span></div><div class="line">                DisplaySquare();</div><div class="line"></div><div class="line">                <span class="comment">//Highlight the units within the selection square, but don't select the units</span></div><div class="line">                <span class="keyword">if</span> (hasCreatedSquare)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allUnits.Length; i++)</div><div class="line">                    &#123;</div><div class="line">                        GameObject currentUnit = allUnits[i];</div><div class="line"></div><div class="line">                        <span class="comment">//Is this unit within the square</span></div><div class="line">                        <span class="keyword">if</span> (IsWithinPolygon(currentUnit.transform.position))</div><div class="line">                        &#123;</div><div class="line">                            currentUnit.GetComponent&lt;MeshRenderer&gt;().material = highlightMaterial;</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">//Otherwise deactivate</span></div><div class="line">                        <span class="keyword">else</span></div><div class="line">                        &#123;</div><div class="line">                            currentUnit.GetComponent&lt;MeshRenderer&gt;().material = normalMaterial;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//Highlight a unit when mouse is above it</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">HighlightUnit</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//Change material on the latest unit we highlighted</span></div><div class="line">            <span class="keyword">if</span> (highlightThisUnit != <span class="literal">null</span>)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//But make sure the unit we want to change material on is not selected</span></div><div class="line">                <span class="keyword">bool</span> isSelected = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; selectedUnits.Count; i++)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span> (selectedUnits[i] == highlightThisUnit)</div><div class="line">                    &#123;</div><div class="line">                        isSelected = <span class="literal">true</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (!isSelected)</div><div class="line">                &#123;</div><div class="line">                    highlightThisUnit.GetComponent&lt;MeshRenderer&gt;().material = normalMaterial;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                highlightThisUnit = <span class="literal">null</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//Fire a ray from the mouse position to get the unit we want to highlight</span></div><div class="line">            RaycastHit hit;</div><div class="line">            <span class="comment">//Fire ray from camera</span></div><div class="line">            <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(Input.mousePosition), <span class="keyword">out</span> hit, <span class="number">200</span>f))</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//Did we hit a friendly unit?</span></div><div class="line">                <span class="keyword">if</span> (hit.collider.CompareTag(<span class="string">"Friendly"</span>))</div><div class="line">                &#123;</div><div class="line">                    <span class="comment">//Get the object we hit</span></div><div class="line">                    GameObject currentObj = hit.collider.gameObject;</div><div class="line"></div><div class="line">                    <span class="comment">//Highlight this unit if it's not selected</span></div><div class="line">                    <span class="keyword">bool</span> isSelected = <span class="literal">false</span>;</div><div class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; selectedUnits.Count; i++)</div><div class="line">                    &#123;</div><div class="line">                        <span class="keyword">if</span> (selectedUnits[i] == currentObj)</div><div class="line">                        &#123;</div><div class="line">                            isSelected = <span class="literal">true</span>;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="keyword">if</span> (!isSelected)</div><div class="line">                    &#123;</div><div class="line">                        highlightThisUnit = currentObj;</div><div class="line"></div><div class="line">                        highlightThisUnit.GetComponent&lt;MeshRenderer&gt;().material = highlightMaterial;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//Is a unit within a polygon determined by 4 corners</span></div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">IsWithinPolygon</span>(<span class="params">Vector3 unitPos</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">bool</span> isWithinPolygon = <span class="literal">false</span>;</div><div class="line"></div><div class="line">            <span class="comment">//The polygon forms 2 triangles, so we need to check if a point is within any of the triangles</span></div><div class="line">            <span class="comment">//Triangle 1: TL - BL - TR</span></div><div class="line">            <span class="keyword">if</span> (IsWithinTriangle(unitPos, TL, BL, TR))</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//Triangle 2: TR - BL - BR</span></div><div class="line">            <span class="keyword">if</span> (IsWithinTriangle(unitPos, TR, BL, BR))</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> isWithinPolygon;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//Is a point within a triangle</span></div><div class="line">        <span class="comment">//From http://totologic.blogspot.se/2014/01/accurate-point-in-triangle-test.html</span></div><div class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">IsWithinTriangle</span>(<span class="params">Vector3 p, Vector3 p1, Vector3 p2, Vector3 p3</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">bool</span> isWithinTriangle = <span class="literal">false</span>;</div><div class="line"></div><div class="line">            <span class="comment">//Need to set z -&gt; y because of other coordinate system</span></div><div class="line">            <span class="keyword">float</span> denominator = ((p2.z - p3.z) * (p1.x - p3.x) + (p3.x - p2.x) * (p1.z - p3.z));</div><div class="line"></div><div class="line">            <span class="keyword">float</span> a = ((p2.z - p3.z) * (p.x - p3.x) + (p3.x - p2.x) * (p.z - p3.z)) / denominator;</div><div class="line">            <span class="keyword">float</span> b = ((p3.z - p1.z) * (p.x - p3.x) + (p1.x - p3.x) * (p.z - p3.z)) / denominator;</div><div class="line">            <span class="keyword">float</span> c = <span class="number">1</span> - a - b;</div><div class="line"></div><div class="line">            <span class="comment">//The point is within the triangle if 0 &lt;= a &lt;= 1 and 0 &lt;= b &lt;= 1 and 0 &lt;= c &lt;= 1</span></div><div class="line">            <span class="keyword">if</span> (a &gt;= <span class="number">0</span>f &amp;&amp; a &lt;= <span class="number">1</span>f &amp;&amp; b &gt;= <span class="number">0</span>f &amp;&amp; b &lt;= <span class="number">1</span>f &amp;&amp; c &gt;= <span class="number">0</span>f &amp;&amp; c &lt;= <span class="number">1</span>f)</div><div class="line">            &#123;</div><div class="line">                isWithinTriangle = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> isWithinTriangle;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//Display the selection with a GUI square</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">DisplaySquare</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//The start position of the square is in 3d space, or the first coordinate will move</span></div><div class="line">            <span class="comment">//as we move the camera which is not what we want</span></div><div class="line">            Vector3 squareStartScreen = Camera.main.WorldToScreenPoint(squareStartPos);</div><div class="line"></div><div class="line">            squareStartScreen.z = <span class="number">0</span>f;</div><div class="line"></div><div class="line">            <span class="comment">//Get the middle position of the square</span></div><div class="line">            Vector3 middle = (squareStartScreen + squareEndPos) / <span class="number">2</span>f;</div><div class="line"></div><div class="line">            <span class="comment">//Set the middle position of the GUI square</span></div><div class="line">            selectionSquareTrans.position = middle;</div><div class="line"></div><div class="line">            <span class="comment">//Change the size of the square</span></div><div class="line">            <span class="keyword">float</span> sizeX = Mathf.Abs(squareStartScreen.x - squareEndPos.x);</div><div class="line">            <span class="keyword">float</span> sizeY = Mathf.Abs(squareStartScreen.y - squareEndPos.y);</div><div class="line"></div><div class="line">            <span class="comment">//Set the size of the square</span></div><div class="line">            selectionSquareTrans.sizeDelta = <span class="keyword">new</span> Vector2(sizeX, sizeY);</div><div class="line"></div><div class="line">            <span class="comment">//The problem is that the corners in the 2d square is not the same as in 3d space</span></div><div class="line">            <span class="comment">//To get corners, we have to fire a ray from the screen</span></div><div class="line">            <span class="comment">//We have 2 of the corner positions, but we don't know which,  </span></div><div class="line">            <span class="comment">//so we can figure it out or fire 4 raycasts</span></div><div class="line">            TL = <span class="keyword">new</span> Vector3(middle.x - sizeX / <span class="number">2</span>f, middle.y + sizeY / <span class="number">2</span>f, <span class="number">0</span>f);</div><div class="line">            TR = <span class="keyword">new</span> Vector3(middle.x + sizeX / <span class="number">2</span>f, middle.y + sizeY / <span class="number">2</span>f, <span class="number">0</span>f);</div><div class="line">            BL = <span class="keyword">new</span> Vector3(middle.x - sizeX / <span class="number">2</span>f, middle.y - sizeY / <span class="number">2</span>f, <span class="number">0</span>f);</div><div class="line">            BR = <span class="keyword">new</span> Vector3(middle.x + sizeX / <span class="number">2</span>f, middle.y - sizeY / <span class="number">2</span>f, <span class="number">0</span>f);</div><div class="line"></div><div class="line">            <span class="comment">//From screen to world</span></div><div class="line">            RaycastHit hit;</div><div class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">            <span class="comment">//Fire ray from camera</span></div><div class="line">            <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(TL), <span class="keyword">out</span> hit, <span class="number">200</span>f, <span class="number">1</span> &lt;&lt; <span class="number">8</span>))</div><div class="line">            &#123;</div><div class="line">                TL = hit.point;</div><div class="line">                i++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(TR), <span class="keyword">out</span> hit, <span class="number">200</span>f, <span class="number">1</span> &lt;&lt; <span class="number">8</span>))</div><div class="line">            &#123;</div><div class="line">                TR = hit.point;</div><div class="line">                i++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(BL), <span class="keyword">out</span> hit, <span class="number">200</span>f, <span class="number">1</span> &lt;&lt; <span class="number">8</span>))</div><div class="line">            &#123;</div><div class="line">                BL = hit.point;</div><div class="line">                i++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (Physics.Raycast(Camera.main.ScreenPointToRay(BR), <span class="keyword">out</span> hit, <span class="number">200</span>f, <span class="number">1</span> &lt;&lt; <span class="number">8</span>))</div><div class="line">            &#123;</div><div class="line">                BR = hit.point;</div><div class="line">                i++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//Could we create a square?</span></div><div class="line">            hasCreatedSquare = <span class="literal">false</span>;</div><div class="line"></div><div class="line">            <span class="comment">//We could find 4 points</span></div><div class="line">            <span class="keyword">if</span> (i == <span class="number">4</span>)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//Display the corners for debug</span></div><div class="line">                <span class="comment">//sphere1.position = TL;</span></div><div class="line">                <span class="comment">//sphere2.position = TR;</span></div><div class="line">                <span class="comment">//sphere3.position = BL;</span></div><div class="line">                <span class="comment">//sphere4.position = BR;</span></div><div class="line"></div><div class="line">                hasCreatedSquare = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>That’s it! What you have should now look like this:</p>
<p><img src="https://raw.githubusercontent.com/tospan/tospan.github.io/source/source/_images/unity/final-select-units-within-square.png" alt="Final version of the select units within square tutorial"></p>
<p>You can test it live here.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tospan.me/2017/02/05/Unity/Select-units-within-a-rectangle/" data-id="cizhoreox00551gvwwhovy764" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity/">Unity</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/02/05/Unity/Tutorials-Clock/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Unity时钟
        
      </div>
    </a>
  
  
    <a href="/2017/02/05/Unity/Patterns-Spatial-Partition-pattern/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">游戏编程模式:Spatial Partition pattern</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Game-Development/">Game Development</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Game-Programming-Patterns/">Game Programming Patterns</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity/">Unity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity-Tutorials/">Unity Tutorials</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/default/">default</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Basics/">Basics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Games/">Games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Geometry/">Geometry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Algebra/">Linear Algebra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mathematics/">Mathematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numerical-Analysis/">Numerical Analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Patterns/">Patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scripting/">Scripting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/default/">default</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithms/" style="font-size: 17.5px;">Algorithms</a> <a href="/tags/Basics/" style="font-size: 12.5px;">Basics</a> <a href="/tags/C/" style="font-size: 12.5px;">C#</a> <a href="/tags/Data-Structure/" style="font-size: 16.25px;">Data Structure</a> <a href="/tags/Games/" style="font-size: 10px;">Games</a> <a href="/tags/Geometry/" style="font-size: 11.25px;">Geometry</a> <a href="/tags/Linear-Algebra/" style="font-size: 13.75px;">Linear Algebra</a> <a href="/tags/Math/" style="font-size: 12.5px;">Math</a> <a href="/tags/Mathematics/" style="font-size: 12.5px;">Mathematics</a> <a href="/tags/Numerical-Analysis/" style="font-size: 10px;">Numerical Analysis</a> <a href="/tags/Patterns/" style="font-size: 15px;">Patterns</a> <a href="/tags/Scripting/" style="font-size: 18.75px;">Scripting</a> <a href="/tags/Unity/" style="font-size: 20px;">Unity</a> <a href="/tags/default/" style="font-size: 11.25px;">default</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/02/23/Unity-Multiplayer-And-Networking/">Unity Multiplayer And Networking</a>
          </li>
        
          <li>
            <a href="/2017/02/23/Unity-Physics/">Unity Physics</a>
          </li>
        
          <li>
            <a href="/2017/02/10/Game-Development/">游戏开发</a>
          </li>
        
          <li>
            <a href="/2017/02/08/Unity/Scripting-Quick-Benchmark/">Unity 简单基准测试</a>
          </li>
        
          <li>
            <a href="/2017/02/07/Unity/Patterns-FSM/">游戏编程设计模式:有限状态机(FSM)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 To Span<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>