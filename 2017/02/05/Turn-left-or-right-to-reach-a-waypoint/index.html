<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Turn left or right to reach a waypoint | 吐司片的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="If you have a character following a series of waypoints, how can you tell if the character should turn left or right to reach the waypoint? We can of course always turn left, but we want to turn the s">
<meta property="og:type" content="article">
<meta property="og:title" content="Turn left or right to reach a waypoint">
<meta property="og:url" content="http://tospan.me/2017/02/05/Turn-left-or-right-to-reach-a-waypoint/index.html">
<meta property="og:site_name" content="吐司片的博客">
<meta property="og:description" content="If you have a character following a series of waypoints, how can you tell if the character should turn left or right to reach the waypoint? We can of course always turn left, but we want to turn the s">
<meta property="og:image" content="http://tospan.me/../_images/turn-left-or-right.png">
<meta property="og:updated_time" content="2017-02-08T03:27:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Turn left or right to reach a waypoint">
<meta name="twitter:description" content="If you have a character following a series of waypoints, how can you tell if the character should turn left or right to reach the waypoint? We can of course always turn left, but we want to turn the s">
<meta name="twitter:image" content="http://tospan.me/../_images/turn-left-or-right.png">
  
    <link rel="alternate" href="/atom.xml" title="吐司片的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">吐司片的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Work hard, play hard.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tospan.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Turn-left-or-right-to-reach-a-waypoint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/05/Turn-left-or-right-to-reach-a-waypoint/" class="article-date">
  <time datetime="2017-02-05T02:03:43.000Z" itemprop="datePublished">2017-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Game-Development/">Game Development</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Turn left or right to reach a waypoint
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>If you have a character following a series of waypoints, how can you tell if the character should turn left or right to reach the waypoint? We can of course always turn left, but we want to turn the smallest possible distance. This is the basic scene:</p>
<p><img src="../_images/turn-left-or-right.png" alt="Turn left or right basic scene"><br><a id="more"></a></p>
<p>To solve this problem we are going to use the Cross Product. The basic idea is that we have two vectors: one going from you to the waypoint and we also know in which direction you are facing. Now we can use the fact that the direction of the cross product is determined by whether the first vector is to the left or to the right of the second vector. Then we can use the dot product to determine the direction of this cross product, in a similar way as in the first part of this tutorial series. This is how the code looks like:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> UnityEngine;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">LinearAlgebra</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//Figure out if you should turn left or right to reach a waypoint</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LeftOrRight</span> : <span class="title">MonoBehaviour</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">public</span> Transform youTrans;</div><div class="line">        <span class="keyword">public</span> Transform wayPointTrans;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//The direction you are facing</span></div><div class="line">            Vector3 youDir = youTrans.forward;</div><div class="line"></div><div class="line">            <span class="comment">//The direction from you to the waypoint</span></div><div class="line">            Vector3 waypointDir = wayPointTrans.position - youTrans.position;</div><div class="line"></div><div class="line">            <span class="comment">//The cross product between these vectors</span></div><div class="line">            Vector3 crossProduct = Vector3.Cross(youDir, waypointDir);</div><div class="line"></div><div class="line">            <span class="comment">//The dot product between the your up vector and the cross product</span></div><div class="line">            <span class="comment">//This can be said to be a volume that can be negative</span></div><div class="line">            <span class="keyword">float</span> dotProduct = Vector3.Dot(crossProduct, youTrans.up);</div><div class="line">            </div><div class="line">            <span class="comment">//Now we can decide if we should turn left or right</span></div><div class="line">            <span class="keyword">if</span> (dotProduct &gt; <span class="number">0</span>f)</div><div class="line">            &#123;</div><div class="line">                Debug.Log(<span class="string">"Turn right"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span></div><div class="line">            &#123;</div><div class="line">                Debug.Log(<span class="string">"Turn left"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>After finishing this section of the tutorial, someone said that there’s a more efficient way to determine if we should turn left or right. You can actually solve this problem by using just the Dot Product. So this tutorial will also show that there may be a more efficient way to solve your problems. This is the code for the more efficient version:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//The right direction of the direction you are facing</span></div><div class="line">Vector3 youDir = youTrans.right;</div><div class="line"></div><div class="line"><span class="comment">//The direction from you to the waypoint</span></div><div class="line">Vector3 waypointDir = wayPointTrans.position - youTrans.position;</div><div class="line"></div><div class="line"><span class="comment">//The dot product between the vectors</span></div><div class="line"><span class="keyword">float</span> dotProduct = Vector3.Dot(youDir, waypointDir);</div><div class="line"></div><div class="line"><span class="comment">//Now we can decide if we should turn left or right</span></div><div class="line"><span class="keyword">if</span> (dotProduct &gt; <span class="number">0</span>f)</div><div class="line">&#123;</div><div class="line">	Debug.Log(<span class="string">"Turn right"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span></div><div class="line">&#123;</div><div class="line">	Debug.Log(<span class="string">"Turn left"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Turn-left-or-right-to-reach-a-direction"><a href="#Turn-left-or-right-to-reach-a-direction" class="headerlink" title="Turn left or right to reach a direction?"></a>Turn left or right to reach a direction?</h2><p>In the above examples we wanted to reach a position. But what if we want to know if we should turn left or right to reach a direction? That’s actually even simpler!</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//The right direction of the direction you are facing</span></div><div class="line">Vector3 youDir = youTrans.right;</div><div class="line"></div><div class="line"><span class="comment">//The direction you want to reach by turning left or right</span></div><div class="line"><span class="comment">//Here we want to reach the forward direction of the waypoint</span></div><div class="line">Vector3 waypointDir = wayPointTrans.forward;</div><div class="line"></div><div class="line"><span class="comment">//The dot product between the vectors</span></div><div class="line"><span class="keyword">float</span> dotProduct = Vector3.Dot(youDir, waypointDir);</div><div class="line"></div><div class="line"><span class="comment">//Now we can decide if we should turn left or right</span></div><div class="line"><span class="keyword">if</span> (dotProduct &gt; <span class="number">0</span>f)</div><div class="line">&#123;</div><div class="line">	Debug.Log(<span class="string">"Turn right"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span></div><div class="line">&#123;</div><div class="line">	Debug.Log(<span class="string">"Turn left"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://www.habrador.com/tutorials/linear-algebra/3-turn-left-or-right/" target="_blank" rel="external">Turn left or right to reach a waypoint?</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tospan.me/2017/02/05/Turn-left-or-right-to-reach-a-waypoint/" data-id="cizcqkke8003magvwc1ck4pfu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linear-Algebra/">Linear Algebra</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mathematics/">Mathematics</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity/">Unity</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/02/05/Find-the-coordinate-where-a-ray-intersects-with-a-plane/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Find the coordinate where a ray intersects with a plane
        
      </div>
    </a>
  
  
    <a href="/2017/02/05/How-to-tell-if-you-have-passed-a-waypoint/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">How to tell if you have passed a waypoint</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Game-Development/">Game Development</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">Math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity/">Unity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/default/">default</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Basics/">Basics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Games/">Games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Geometry/">Geometry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linear-Algebra/">Linear Algebra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mathematics/">Mathematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numerical-Analysis/">Numerical Analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Patterns/">Patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scripting/">Scripting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/default/">default</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithms/" style="font-size: 10px;">Algorithms</a> <a href="/tags/Basics/" style="font-size: 15px;">Basics</a> <a href="/tags/C/" style="font-size: 13.33px;">C#</a> <a href="/tags/Games/" style="font-size: 10px;">Games</a> <a href="/tags/Geometry/" style="font-size: 11.67px;">Geometry</a> <a href="/tags/Linear-Algebra/" style="font-size: 16.67px;">Linear Algebra</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Mathematics/" style="font-size: 15px;">Mathematics</a> <a href="/tags/Numerical-Analysis/" style="font-size: 10px;">Numerical Analysis</a> <a href="/tags/Patterns/" style="font-size: 10px;">Patterns</a> <a href="/tags/Scripting/" style="font-size: 13.33px;">Scripting</a> <a href="/tags/Unity/" style="font-size: 20px;">Unity</a> <a href="/tags/default/" style="font-size: 18.33px;">default</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/02/16/Algorithms-Data-Structure/">算法:数据结构</a>
          </li>
        
          <li>
            <a href="/2017/02/16/Algorithms-Sorting/">算法：排序</a>
          </li>
        
          <li>
            <a href="/2017/02/16/Algorithms-Test-Bed/">搭建算法测试环境</a>
          </li>
        
          <li>
            <a href="/2017/02/16/Algorithms-Basics/">Algorithms Basics</a>
          </li>
        
          <li>
            <a href="/2017/02/16/Algorithms/">Algorithms</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 To Span<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>